<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/basicLayout}">

<th:block layout:fragment="script">
  <script th:inline="javascript">
    let message = [[${message}]];
    if(message != null) alert(message);

    function fCheck() {
      let regPwd = /^[a-zA-Z0-9]{4,16}$/;

      let newPwd = form.newPassword.value;
      let confirmPwd = form.confirmPassword.value;

      if(newPwd != confirmPwd) {
        alert("새 비밀번호와 비밀번호 확인이 일치하지 않습니다.");
        return false;
      }
      else if(!regPwd.test(newPwd)) {
        alert("비밀번호는 4~16자의 영문 대소문자와 숫자를 사용할 수 있습니다.");
        return false;
      }
      form.submit();
    }

  </script>
</th:block>
<style layout:fragment="css" >
  body {
    font-family: Arial, sans-serif;
  }
  .row {
    margin: 0px;
    padding: 10px;
    align-items: center;
  }
  .row label {
    width: 125px;
    text-align: right;
    margin-right: 10px;
  }
</style>

<div layout:fragment="content">
  <div class="device-card">
    <h2>비밀번호변경</h2>
  </div>
  <div class="device-card">
    <div class="d-flex justify-content-center">
      <form name="form" method="post" class="flex-grow-1">
        <div class="row align-items-center justify-content-center">
          <label for="currentPassword" class="col-auto col-form-label">현재 비밀번호</label>
          <div class="col-md-4">
            <input type="password" id="currentPassword" name="currentPassword" class="form-control" placeholder="현재 비밀번호">
          </div>
        </div>
        <div class="row align-items-center justify-content-center">
          <label for="newPassword" class="col-auto col-form-label">새 비밀번호</label>
          <div class="col-md-4">
            <input type="password" id="newPassword" name="newPassword" class="form-control" placeholder="새 비밀번호">
          </div>
        </div>
        <div class="row align-items-center justify-content-center">
          <label for="confirmPassword" class="col-auto col-form-label">비밀번호 확인</label>
          <div class="col-md-4">
            <input type="password" id="confirmPassword" name="confirmPassword" class="form-control" placeholder="새 비밀번호 확인">
          </div>
        </div>
        <div class="d-flex justify-content-center gap-3 mt-4">
          <button type="button" class="btn btn-dark w-40 px-4" onclick="fCheck()">확인</button>
          <button type="button" class="btn btn-dark w-40 px-4" onclick="location.href='/SpringGroupBB/member/memberMain'">취소</button>
        </div>
        <input type="hidden" name="_csrf" th:value="${_csrf.token}" />
      </form>
    </div>
  </div>
</div>
</html>